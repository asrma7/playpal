package main

import (
	"fmt"

	"github.com/asrma7/playpal/api-gateway/config"
	"github.com/asrma7/playpal/api-gateway/pkg/auth"
	"github.com/asrma7/playpal/api-gateway/pkg/feed"
	"github.com/gin-gonic/gin"
)

func main() {
	fmt.Println(`
	                                                                                
                             (%%%%%%%%%%%%%%                                    
                        %%%%%%%%%%%,,,%%%%%%%%%%%(                              
                    %%%%%%,,,,,,,,,,,,,,,,,,,,,%%%%%%                           
                  %%%%%,,,,,,,,%%%%%%%%%%(,,,,,,,,*%%%%(                        
                %%%%,,,,,,,%%%%,,,,,,,,,,%%%%%,,,,,,,%%%%%                      
              %%%%,,,,,,,%%%%%%,,,,,,,,,(%%%%%%%,,,,,,,%%%%                     
             &&&&,,,,,,%%%%%%%%,,,,,,,,,,%%%%%%%%,,,,,,,&&&&                    
            &&&&,,,,,,/%%%%%,,(%%%%%%%%%%,,,,,,,%%,,,,,,,&&&&                   
            &&&,,,,,,,%%,,,,,,,,%%%%%%%%%,,,,,,,%%*,,,,,,,&&&#                  
           &&&&,,,*//,%%,,,,,,,,%%%%%%%%%,,,,,,,%%,,///,,,&&&&                  
           &&&&,,,///,,%%%%%%%,%%*%%%%%%%%,,%%%,%%,////,,,&&&&                  
            &&&,,,////,,%%%%%%%%,,,,,,,,,%%%%%%%%,/////,,,&&&&                  
            &&&&,,,(((((,,%%%%%%%,,,,,,,%%%%%%%,,((((((,,*&&&                   
             &&&&,,(((((((,,/%%%%%,,,,,%%%%%,,,(((((((,,,&&&                    
              &&&&,,/(((((((((,,,,,,,,,,,,,((((((((((,,,&&&&                    
               &&&&,,,(((((((((((((((,((((((((((((((,,,&&&%                     
                &&&&,,,((((((((((((,,(,,(((((((((((,,,&&&%                      
                  &&&&,,,,,,,,,,,,,((((,,,,,,,,,,,,,&&&&                        
                   &&&&,,,##########,,##########,,,&&&&                         
                     &&&&,,,#########,########,,,%&&&%                          
                      &&&&&,,,#######,######,,,,&&&&                            
                        &&&&#,,,#####,####*,,,&&&&      ////((                  
                          &&&&&,,,,##,##,,,,&&&&&   ///////(((((((              
                            &&&&&,,,,,,,,,&&&&&    //////((((((((((             
                              %&&&&%,,,,&&&&&     /////((((((((((((#            
                                 &&&&&&&&&         ///((((((((((((##            
                                                   #((((((((((((###             
                                                      (((((((((##               
                                                                                
                  //****,  ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,*                       
                                                                                 
	`)

	c, err := config.LoadConfig()

	if err != nil {
		fmt.Println("Error loading config")
	}

	r := gin.Default()

	authsvc := *auth.RegisterRoutes(r, &c)
	feed.RegisterRoutes(r, &c, &authsvc)

	r.Run(c.Port)
}
